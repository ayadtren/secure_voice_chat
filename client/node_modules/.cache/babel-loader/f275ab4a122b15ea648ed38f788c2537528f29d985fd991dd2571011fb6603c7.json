{"ast":null,"code":"var _jsxFileName = \"/Users/ayadyousifshahi/Documents/webchat app/client/src/components/VideoChatRoom.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { WebRTCManager } from '../utils/webrtcManager';\nimport { clsx } from 'clsx';\nimport { cn } from '../lib/utils';\nimport QRCodeGenerator from './QRCodeGenerator';\nimport VideoContainer from './VideoContainer';\nimport VideoControls from './VideoControls';\nimport CameraPermissionGuide from './CameraPermissionGuide';\n\n/**\n * VideoChatRoom Component\n * \n * Main component for the video/voice chat room functionality.\n * Handles WebRTC connections, audio/video processing, and UI for the chat.\n */\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VideoChatRoom = ({\n  roomId,\n  userId,\n  onLeave\n}) => {\n  _s();\n  var _cameraStatus$browser;\n  const [socket, setSocket] = useState(null);\n  const [webrtcManager, setWebrtcManager] = useState(null);\n  const [connectedPeers, setConnectedPeers] = useState([]);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [peerSpeaking, setPeerSpeaking] = useState({});\n  const [audioLevels, setAudioLevels] = useState({});\n  const [connectionQualities, setConnectionQualities] = useState({});\n  const [error, setError] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(true);\n  const [showQRCode, setShowQRCode] = useState(false);\n\n  // Video-related state\n  const [isVideoEnabled, setIsVideoEnabled] = useState(false);\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [cameraStatus, setCameraStatus] = useState(null);\n  const [localVideoStream, setLocalVideoStream] = useState(null);\n  const [remoteVideoStreams, setRemoteVideoStreams] = useState({});\n\n  // References\n  const audioRefs = useRef({});\n  const animationFrameRef = useRef(null);\n\n  // Initialize socket and WebRTC manager\n  useEffect(() => {\n    // Create socket connection to signaling server\n    const newSocket = io(process.env.REACT_APP_SIGNALING_SERVER || window.location.origin, {\n      path: '/socket.io',\n      transports: ['websocket'],\n      secure: window.location.protocol === 'https:',\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000\n    });\n    setSocket(newSocket);\n\n    // Socket event handlers\n    newSocket.on('connect', () => {\n      console.log('Connected to signaling server');\n    });\n    newSocket.on('connect_error', err => {\n      console.error('Connection error:', err);\n      setError('Failed to connect to the signaling server. Please try again.');\n    });\n\n    // Clean up on unmount\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      newSocket.disconnect();\n    };\n  }, []);\n\n  // Initialize WebRTC manager when socket is ready\n  useEffect(() => {\n    if (!socket || !roomId) return;\n    const manager = new WebRTCManager(socket, {\n      userId,\n      onPeerConnect: handlePeerConnect,\n      onPeerDisconnect: handlePeerDisconnect,\n      onSpeakingChange: handleSpeakingChange,\n      onAudioQualityChange: handleAudioQualityChange,\n      onError: errorMsg => setError(errorMsg),\n      onMicrophoneStatus: handleMicrophoneStatus,\n      onCameraStatus: handleCameraStatus,\n      onLocalVideo: handleLocalVideo,\n      onRemoteVideo: handleRemoteVideo,\n      onVideoStatusChange: handleVideoStatusChange\n    });\n    setWebrtcManager(manager);\n\n    // Initialize WebRTC and join room\n    manager.initialize(roomId).then(() => {\n      setIsConnecting(false);\n      startAudioLevelMonitoring(manager);\n\n      // Get available video devices\n      manager.getVideoDevices().then(devices => {\n        setVideoDevices(devices);\n      });\n    }).catch(err => {\n      console.error('Failed to initialize WebRTC:', err);\n      setError('Failed to access microphone. Please check your permissions.');\n      setIsConnecting(false);\n    });\n\n    // Clean up on unmount\n    return () => {\n      if (manager) {\n        manager.dispose();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [socket, roomId, userId]);\n\n  // Handle peer connection\n  const handlePeerConnect = (peerId, stream) => {\n    console.log(`Peer connected: ${peerId}`);\n\n    // Add to connected peers\n    setConnectedPeers(prevPeers => {\n      if (!prevPeers.includes(peerId)) {\n        return [...prevPeers, peerId];\n      }\n      return prevPeers;\n    });\n\n    // Create audio element for peer\n    if (stream) {\n      const audioElement = new Audio();\n      audioElement.srcObject = stream;\n      audioElement.autoplay = true;\n\n      // Store audio element reference\n      audioRefs.current[peerId] = audioElement;\n\n      // Start playing\n      audioElement.play().catch(err => {\n        console.error('Error playing audio:', err);\n      });\n    }\n  };\n\n  // Handle peer disconnection\n  const handlePeerDisconnect = peerId => {\n    console.log(`Peer disconnected: ${peerId}`);\n\n    // Remove from connected peers\n    setConnectedPeers(prevPeers => prevPeers.filter(id => id !== peerId));\n\n    // Remove speaking status\n    setPeerSpeaking(prevState => {\n      const newState = {\n        ...prevState\n      };\n      delete newState[peerId];\n      return newState;\n    });\n\n    // Remove audio levels\n    setAudioLevels(prevLevels => {\n      const newLevels = {\n        ...prevLevels\n      };\n      delete newLevels[peerId];\n      return newLevels;\n    });\n\n    // Remove connection quality\n    setConnectionQualities(prevQualities => {\n      const newQualities = {\n        ...prevQualities\n      };\n      delete newQualities[peerId];\n      return newQualities;\n    });\n\n    // Remove video stream\n    setRemoteVideoStreams(prevStreams => {\n      const newStreams = {\n        ...prevStreams\n      };\n      delete newStreams[peerId];\n      return newStreams;\n    });\n\n    // Clean up audio element\n    if (audioRefs.current[peerId]) {\n      audioRefs.current[peerId].srcObject = null;\n      delete audioRefs.current[peerId];\n    }\n  };\n\n  // Handle speaking change\n  const handleSpeakingChange = speaking => {\n    setIsSpeaking(speaking);\n  };\n\n  // Handle remote peer speaking change\n  const handlePeerSpeakingChange = (peerId, speaking) => {\n    setPeerSpeaking(prevState => ({\n      ...prevState,\n      [peerId]: speaking\n    }));\n  };\n\n  // Handle audio quality change\n  const handleAudioQualityChange = (peerId, quality, metrics) => {\n    setConnectionQualities(prevQualities => ({\n      ...prevQualities,\n      [peerId]: {\n        quality,\n        metrics\n      }\n    }));\n  };\n\n  // Handle microphone status change\n  const handleMicrophoneStatus = status => {\n    // This can be used to show microphone permission UI if needed\n    console.log('Microphone status:', status);\n  };\n\n  // Handle camera status change\n  const handleCameraStatus = status => {\n    setCameraStatus(status);\n  };\n\n  // Handle local video stream\n  const handleLocalVideo = stream => {\n    setLocalVideoStream(stream);\n  };\n\n  // Handle remote video stream\n  const handleRemoteVideo = (peerId, stream) => {\n    setRemoteVideoStreams(prevStreams => ({\n      ...prevStreams,\n      [peerId]: stream\n    }));\n  };\n\n  // Handle video status change\n  const handleVideoStatusChange = enabled => {\n    setIsVideoEnabled(enabled);\n  };\n\n  // Start monitoring audio levels\n  const startAudioLevelMonitoring = manager => {\n    const updateAudioLevels = () => {\n      if (!manager) return;\n\n      // Update local audio level\n      const localLevel = manager.getAudioLevel();\n      setAudioLevels(prevLevels => ({\n        ...prevLevels,\n        local: localLevel\n      }));\n\n      // Continue monitoring\n      animationFrameRef.current = requestAnimationFrame(updateAudioLevels);\n    };\n\n    // Start monitoring\n    updateAudioLevels();\n  };\n\n  // Toggle mute\n  const handleToggleMute = () => {\n    if (webrtcManager) {\n      const newMuteState = webrtcManager.toggleMute();\n      setIsMuted(newMuteState);\n    }\n  };\n\n  // Toggle video\n  const handleToggleVideo = async () => {\n    if (webrtcManager) {\n      const videoEnabled = await webrtcManager.toggleVideo();\n      setIsVideoEnabled(videoEnabled);\n    }\n  };\n\n  // Switch camera\n  const handleSwitchCamera = async deviceId => {\n    if (webrtcManager) {\n      await webrtcManager.switchCamera(deviceId);\n    }\n  };\n\n  // Retry camera access\n  const handleRetryCameraAccess = async () => {\n    if (webrtcManager) {\n      const videoEnabled = await webrtcManager.toggleVideo();\n      setIsVideoEnabled(videoEnabled);\n    }\n  };\n\n  // Leave room\n  const handleLeaveRoom = () => {\n    if (webrtcManager) {\n      webrtcManager.leaveRoom();\n    }\n    if (onLeave) {\n      onLeave();\n    }\n  };\n\n  // Toggle QR code display\n  const handleToggleQRCode = () => {\n    setShowQRCode(prev => !prev);\n  };\n\n  // Generate connection data for QR code\n  const getConnectionData = () => {\n    return JSON.stringify({\n      roomId,\n      server: window.location.origin\n    });\n  };\n\n  // Calculate grid columns based on number of participants\n  const getGridColumns = () => {\n    const totalParticipants = 1 + connectedPeers.length; // Local user + peers\n\n    if (totalParticipants === 1) return 'grid-cols-1';\n    if (totalParticipants === 2) return 'grid-cols-1 md:grid-cols-2';\n    if (totalParticipants <= 4) return 'grid-cols-2';\n    if (totalParticipants <= 6) return 'grid-cols-2 md:grid-cols-3';\n    return 'grid-cols-2 md:grid-cols-3 lg:grid-cols-4';\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-full bg-gradient-to-b from-white to-gray-50\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-medium text-gray-900\",\n          children: [\"Room: \", roomId]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: [connectedPeers.length, \" \", connectedPeers.length === 1 ? 'peer' : 'peers', \" connected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggleQRCode,\n          className: clsx('inline-flex items-center justify-center px-2 py-[calc(--spacing(1.5)-1px)]', 'rounded-lg border border-transparent ring-1 shadow-sm ring-black/10', 'text-sm font-medium whitespace-nowrap text-gray-950', 'data-hover:bg-gray-50'),\n          \"aria-label\": showQRCode ? \"Hide QR code\" : \"Show QR code for connection\",\n          children: showQRCode ? \"Hide QR\" : \"Show QR\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleToggleMute,\n          className: clsx('inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]', 'rounded-full border border-transparent shadow-md', 'text-base font-medium whitespace-nowrap', isMuted ? 'bg-white/15 ring-1 ring-[#D15052]/15 text-gray-950 data-hover:bg-white/20' : 'bg-gray-950 text-white data-hover:bg-gray-800', 'after:absolute after:inset-0 after:rounded-full after:shadow-[inset_0_0_2px_1px_#ffffff4d]'),\n          \"aria-label\": isMuted ? \"Unmute microphone\" : \"Mute microphone\",\n          children: isMuted ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              className: \"w-5 h-5 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"1\",\n                y1: \"1\",\n                x2: \"23\",\n                y2: \"23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"12\",\n                y1: \"19\",\n                x2: \"12\",\n                y2: \"23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"8\",\n                y1: \"23\",\n                x2: \"16\",\n                y2: \"23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 370,\n              columnNumber: 17\n            }, this), \"Unmute\"]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              className: \"w-5 h-5 mr-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M19 10v2a7 7 0 0 1-14 0v-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"12\",\n                y1: \"19\",\n                x2: \"12\",\n                y2: \"23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n                x1: \"8\",\n                y1: \"23\",\n                x2: \"16\",\n                y2: \"23\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), \"Mute\"]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(VideoControls, {\n          isVideoEnabled: isVideoEnabled,\n          onToggleVideo: handleToggleVideo,\n          onSwitchCamera: handleSwitchCamera,\n          videoDevices: videoDevices\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLeaveRoom,\n          className: clsx('inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]', 'rounded-full border border-transparent bg-[#D15052] shadow-md', 'text-base font-medium whitespace-nowrap text-white', 'data-hover:bg-[#C04042]'),\n          \"aria-label\": \"Leave chat room\",\n          children: \"Leave\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 p-4 overflow-auto\",\n      children: isConnecting ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-medium mb-2 text-gray-900\",\n          children: \"Connecting...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500\",\n          children: \"Setting up secure connection\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 11\n      }, this) : error ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center justify-center h-full\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-lg font-medium text-[#D15052] mb-2\",\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-500 mb-4\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLeaveRoom,\n          className: clsx('inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]', 'rounded-full border border-transparent bg-gray-950 shadow-md', 'text-base font-medium whitespace-nowrap text-white', 'data-hover:bg-gray-800'),\n          children: \"Go Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col space-y-4\",\n        children: [showQRCode && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white p-6 rounded-xl shadow-md mx-auto max-w-xs\",\n          children: [/*#__PURE__*/_jsxDEV(QRCodeGenerator, {\n            connectionData: getConnectionData(),\n            className: \"mx-auto\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center mt-4 text-sm text-gray-500\",\n            children: \"Scan to join this room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 15\n        }, this), cameraStatus && cameraStatus.status !== 'granted' && isVideoEnabled && /*#__PURE__*/_jsxDEV(CameraPermissionGuide, {\n          status: cameraStatus.status,\n          instructions: cameraStatus.instructions,\n          browser: (_cameraStatus$browser = cameraStatus.browser) === null || _cameraStatus$browser === void 0 ? void 0 : _cameraStatus$browser.name,\n          onRetry: handleRetryCameraAccess,\n          className: \"mx-auto max-w-md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: clsx('grid gap-4', getGridColumns(), 'auto-rows-fr'),\n          children: [/*#__PURE__*/_jsxDEV(VideoContainer, {\n            stream: localVideoStream,\n            isMuted: true,\n            isLocal: true,\n            displayName: userId,\n            isSpeaking: isSpeaking,\n            isVideoEnabled: isVideoEnabled && localVideoStream !== null,\n            className: \"aspect-video h-full\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 15\n          }, this), connectedPeers.map(peerId => /*#__PURE__*/_jsxDEV(VideoContainer, {\n            stream: remoteVideoStreams[peerId],\n            isMuted: false,\n            isLocal: false,\n            displayName: peerId,\n            isSpeaking: peerSpeaking[peerId] || false,\n            isVideoEnabled: remoteVideoStreams[peerId] !== undefined,\n            className: \"aspect-video h-full\"\n          }, peerId, false, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 331,\n    columnNumber: 5\n  }, this);\n};\n_s(VideoChatRoom, \"lC6PS/AbGody4EqXHQKm+nk5SOU=\");\n_c = VideoChatRoom;\nexport default VideoChatRoom;\nvar _c;\n$RefreshReg$(_c, \"VideoChatRoom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","io","WebRTCManager","clsx","cn","QRCodeGenerator","VideoContainer","VideoControls","CameraPermissionGuide","jsxDEV","_jsxDEV","Fragment","_Fragment","VideoChatRoom","roomId","userId","onLeave","_s","_cameraStatus$browser","socket","setSocket","webrtcManager","setWebrtcManager","connectedPeers","setConnectedPeers","isMuted","setIsMuted","isSpeaking","setIsSpeaking","peerSpeaking","setPeerSpeaking","audioLevels","setAudioLevels","connectionQualities","setConnectionQualities","error","setError","isConnecting","setIsConnecting","showQRCode","setShowQRCode","isVideoEnabled","setIsVideoEnabled","videoDevices","setVideoDevices","cameraStatus","setCameraStatus","localVideoStream","setLocalVideoStream","remoteVideoStreams","setRemoteVideoStreams","audioRefs","animationFrameRef","newSocket","process","env","REACT_APP_SIGNALING_SERVER","window","location","origin","path","transports","secure","protocol","reconnection","reconnectionAttempts","reconnectionDelay","on","console","log","err","current","cancelAnimationFrame","disconnect","manager","onPeerConnect","handlePeerConnect","onPeerDisconnect","handlePeerDisconnect","onSpeakingChange","handleSpeakingChange","onAudioQualityChange","handleAudioQualityChange","onError","errorMsg","onMicrophoneStatus","handleMicrophoneStatus","onCameraStatus","handleCameraStatus","onLocalVideo","handleLocalVideo","onRemoteVideo","handleRemoteVideo","onVideoStatusChange","handleVideoStatusChange","initialize","then","startAudioLevelMonitoring","getVideoDevices","devices","catch","dispose","peerId","stream","prevPeers","includes","audioElement","Audio","srcObject","autoplay","play","filter","id","prevState","newState","prevLevels","newLevels","prevQualities","newQualities","prevStreams","newStreams","speaking","handlePeerSpeakingChange","quality","metrics","status","enabled","updateAudioLevels","localLevel","getAudioLevel","local","requestAnimationFrame","handleToggleMute","newMuteState","toggleMute","handleToggleVideo","videoEnabled","toggleVideo","handleSwitchCamera","deviceId","switchCamera","handleRetryCameraAccess","handleLeaveRoom","leaveRoom","handleToggleQRCode","prev","getConnectionData","JSON","stringify","server","getGridColumns","totalParticipants","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x1","y1","x2","y2","d","onToggleVideo","onSwitchCamera","connectionData","instructions","browser","name","onRetry","isLocal","displayName","map","undefined","_c","$RefreshReg$"],"sources":["/Users/ayadyousifshahi/Documents/webchat app/client/src/components/VideoChatRoom.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { io } from 'socket.io-client';\nimport { WebRTCManager } from '../utils/webrtcManager';\nimport { clsx } from 'clsx';\nimport { cn } from '../lib/utils';\nimport QRCodeGenerator from './QRCodeGenerator';\nimport VideoContainer from './VideoContainer';\nimport VideoControls from './VideoControls';\nimport CameraPermissionGuide from './CameraPermissionGuide';\n\n/**\n * VideoChatRoom Component\n * \n * Main component for the video/voice chat room functionality.\n * Handles WebRTC connections, audio/video processing, and UI for the chat.\n */\nconst VideoChatRoom = ({ roomId, userId, onLeave }) => {\n  const [socket, setSocket] = useState(null);\n  const [webrtcManager, setWebrtcManager] = useState(null);\n  const [connectedPeers, setConnectedPeers] = useState([]);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [peerSpeaking, setPeerSpeaking] = useState({});\n  const [audioLevels, setAudioLevels] = useState({});\n  const [connectionQualities, setConnectionQualities] = useState({});\n  const [error, setError] = useState(null);\n  const [isConnecting, setIsConnecting] = useState(true);\n  const [showQRCode, setShowQRCode] = useState(false);\n  \n  // Video-related state\n  const [isVideoEnabled, setIsVideoEnabled] = useState(false);\n  const [videoDevices, setVideoDevices] = useState([]);\n  const [cameraStatus, setCameraStatus] = useState(null);\n  const [localVideoStream, setLocalVideoStream] = useState(null);\n  const [remoteVideoStreams, setRemoteVideoStreams] = useState({});\n  \n  // References\n  const audioRefs = useRef({});\n  const animationFrameRef = useRef(null);\n  \n  // Initialize socket and WebRTC manager\n  useEffect(() => {\n    // Create socket connection to signaling server\n    const newSocket = io(process.env.REACT_APP_SIGNALING_SERVER || window.location.origin, {\n      path: '/socket.io',\n      transports: ['websocket'],\n      secure: window.location.protocol === 'https:',\n      reconnection: true,\n      reconnectionAttempts: 5,\n      reconnectionDelay: 1000,\n    });\n    \n    setSocket(newSocket);\n    \n    // Socket event handlers\n    newSocket.on('connect', () => {\n      console.log('Connected to signaling server');\n    });\n    \n    newSocket.on('connect_error', (err) => {\n      console.error('Connection error:', err);\n      setError('Failed to connect to the signaling server. Please try again.');\n    });\n    \n    // Clean up on unmount\n    return () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n      \n      newSocket.disconnect();\n    };\n  }, []);\n  \n  // Initialize WebRTC manager when socket is ready\n  useEffect(() => {\n    if (!socket || !roomId) return;\n    \n    const manager = new WebRTCManager(socket, {\n      userId,\n      onPeerConnect: handlePeerConnect,\n      onPeerDisconnect: handlePeerDisconnect,\n      onSpeakingChange: handleSpeakingChange,\n      onAudioQualityChange: handleAudioQualityChange,\n      onError: (errorMsg) => setError(errorMsg),\n      onMicrophoneStatus: handleMicrophoneStatus,\n      onCameraStatus: handleCameraStatus,\n      onLocalVideo: handleLocalVideo,\n      onRemoteVideo: handleRemoteVideo,\n      onVideoStatusChange: handleVideoStatusChange,\n    });\n    \n    setWebrtcManager(manager);\n    \n    // Initialize WebRTC and join room\n    manager.initialize(roomId)\n      .then(() => {\n        setIsConnecting(false);\n        startAudioLevelMonitoring(manager);\n        \n        // Get available video devices\n        manager.getVideoDevices().then(devices => {\n          setVideoDevices(devices);\n        });\n      })\n      .catch((err) => {\n        console.error('Failed to initialize WebRTC:', err);\n        setError('Failed to access microphone. Please check your permissions.');\n        setIsConnecting(false);\n      });\n    \n    // Clean up on unmount\n    return () => {\n      if (manager) {\n        manager.dispose();\n      }\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n      }\n    };\n  }, [socket, roomId, userId]);\n  \n  // Handle peer connection\n  const handlePeerConnect = (peerId, stream) => {\n    console.log(`Peer connected: ${peerId}`);\n    \n    // Add to connected peers\n    setConnectedPeers((prevPeers) => {\n      if (!prevPeers.includes(peerId)) {\n        return [...prevPeers, peerId];\n      }\n      return prevPeers;\n    });\n    \n    // Create audio element for peer\n    if (stream) {\n      const audioElement = new Audio();\n      audioElement.srcObject = stream;\n      audioElement.autoplay = true;\n      \n      // Store audio element reference\n      audioRefs.current[peerId] = audioElement;\n      \n      // Start playing\n      audioElement.play().catch((err) => {\n        console.error('Error playing audio:', err);\n      });\n    }\n  };\n  \n  // Handle peer disconnection\n  const handlePeerDisconnect = (peerId) => {\n    console.log(`Peer disconnected: ${peerId}`);\n    \n    // Remove from connected peers\n    setConnectedPeers((prevPeers) => prevPeers.filter((id) => id !== peerId));\n    \n    // Remove speaking status\n    setPeerSpeaking((prevState) => {\n      const newState = { ...prevState };\n      delete newState[peerId];\n      return newState;\n    });\n    \n    // Remove audio levels\n    setAudioLevels((prevLevels) => {\n      const newLevels = { ...prevLevels };\n      delete newLevels[peerId];\n      return newLevels;\n    });\n    \n    // Remove connection quality\n    setConnectionQualities((prevQualities) => {\n      const newQualities = { ...prevQualities };\n      delete newQualities[peerId];\n      return newQualities;\n    });\n    \n    // Remove video stream\n    setRemoteVideoStreams((prevStreams) => {\n      const newStreams = { ...prevStreams };\n      delete newStreams[peerId];\n      return newStreams;\n    });\n    \n    // Clean up audio element\n    if (audioRefs.current[peerId]) {\n      audioRefs.current[peerId].srcObject = null;\n      delete audioRefs.current[peerId];\n    }\n  };\n  \n  // Handle speaking change\n  const handleSpeakingChange = (speaking) => {\n    setIsSpeaking(speaking);\n  };\n  \n  // Handle remote peer speaking change\n  const handlePeerSpeakingChange = (peerId, speaking) => {\n    setPeerSpeaking((prevState) => ({\n      ...prevState,\n      [peerId]: speaking,\n    }));\n  };\n  \n  // Handle audio quality change\n  const handleAudioQualityChange = (peerId, quality, metrics) => {\n    setConnectionQualities((prevQualities) => ({\n      ...prevQualities,\n      [peerId]: { quality, metrics },\n    }));\n  };\n  \n  // Handle microphone status change\n  const handleMicrophoneStatus = (status) => {\n    // This can be used to show microphone permission UI if needed\n    console.log('Microphone status:', status);\n  };\n  \n  // Handle camera status change\n  const handleCameraStatus = (status) => {\n    setCameraStatus(status);\n  };\n  \n  // Handle local video stream\n  const handleLocalVideo = (stream) => {\n    setLocalVideoStream(stream);\n  };\n  \n  // Handle remote video stream\n  const handleRemoteVideo = (peerId, stream) => {\n    setRemoteVideoStreams((prevStreams) => ({\n      ...prevStreams,\n      [peerId]: stream,\n    }));\n  };\n  \n  // Handle video status change\n  const handleVideoStatusChange = (enabled) => {\n    setIsVideoEnabled(enabled);\n  };\n  \n  // Start monitoring audio levels\n  const startAudioLevelMonitoring = (manager) => {\n    const updateAudioLevels = () => {\n      if (!manager) return;\n      \n      // Update local audio level\n      const localLevel = manager.getAudioLevel();\n      \n      setAudioLevels((prevLevels) => ({\n        ...prevLevels,\n        local: localLevel,\n      }));\n      \n      // Continue monitoring\n      animationFrameRef.current = requestAnimationFrame(updateAudioLevels);\n    };\n    \n    // Start monitoring\n    updateAudioLevels();\n  };\n  \n  // Toggle mute\n  const handleToggleMute = () => {\n    if (webrtcManager) {\n      const newMuteState = webrtcManager.toggleMute();\n      setIsMuted(newMuteState);\n    }\n  };\n  \n  // Toggle video\n  const handleToggleVideo = async () => {\n    if (webrtcManager) {\n      const videoEnabled = await webrtcManager.toggleVideo();\n      setIsVideoEnabled(videoEnabled);\n    }\n  };\n  \n  // Switch camera\n  const handleSwitchCamera = async (deviceId) => {\n    if (webrtcManager) {\n      await webrtcManager.switchCamera(deviceId);\n    }\n  };\n  \n  // Retry camera access\n  const handleRetryCameraAccess = async () => {\n    if (webrtcManager) {\n      const videoEnabled = await webrtcManager.toggleVideo();\n      setIsVideoEnabled(videoEnabled);\n    }\n  };\n  \n  // Leave room\n  const handleLeaveRoom = () => {\n    if (webrtcManager) {\n      webrtcManager.leaveRoom();\n    }\n    \n    if (onLeave) {\n      onLeave();\n    }\n  };\n  \n  // Toggle QR code display\n  const handleToggleQRCode = () => {\n    setShowQRCode((prev) => !prev);\n  };\n  \n  // Generate connection data for QR code\n  const getConnectionData = () => {\n    return JSON.stringify({\n      roomId,\n      server: window.location.origin,\n    });\n  };\n  \n  // Calculate grid columns based on number of participants\n  const getGridColumns = () => {\n    const totalParticipants = 1 + connectedPeers.length; // Local user + peers\n    \n    if (totalParticipants === 1) return 'grid-cols-1';\n    if (totalParticipants === 2) return 'grid-cols-1 md:grid-cols-2';\n    if (totalParticipants <= 4) return 'grid-cols-2';\n    if (totalParticipants <= 6) return 'grid-cols-2 md:grid-cols-3';\n    return 'grid-cols-2 md:grid-cols-3 lg:grid-cols-4';\n  };\n  \n  return (\n    <div className=\"flex flex-col h-full bg-gradient-to-b from-white to-gray-50\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white shadow-sm\">\n        <div className=\"flex items-center space-x-2\">\n          <h2 className=\"text-lg font-medium text-gray-900\">Room: {roomId}</h2>\n          <div className=\"text-sm text-gray-500\">\n            {connectedPeers.length} {connectedPeers.length === 1 ? 'peer' : 'peers'} connected\n          </div>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <button\n            onClick={handleToggleQRCode}\n            className={clsx(\n              'inline-flex items-center justify-center px-2 py-[calc(--spacing(1.5)-1px)]',\n              'rounded-lg border border-transparent ring-1 shadow-sm ring-black/10',\n              'text-sm font-medium whitespace-nowrap text-gray-950',\n              'data-hover:bg-gray-50'\n            )}\n            aria-label={showQRCode ? \"Hide QR code\" : \"Show QR code for connection\"}\n          >\n            {showQRCode ? \"Hide QR\" : \"Show QR\"}\n          </button>\n          \n          <button\n            onClick={handleToggleMute}\n            className={clsx(\n              'inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]',\n              'rounded-full border border-transparent shadow-md',\n              'text-base font-medium whitespace-nowrap',\n              isMuted ? \n                'bg-white/15 ring-1 ring-[#D15052]/15 text-gray-950 data-hover:bg-white/20' : \n                'bg-gray-950 text-white data-hover:bg-gray-800',\n              'after:absolute after:inset-0 after:rounded-full after:shadow-[inset_0_0_2px_1px_#ffffff4d]'\n            )}\n            aria-label={isMuted ? \"Unmute microphone\" : \"Mute microphone\"}\n          >\n            {isMuted ? (\n              <>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-5 h-5 mr-2\">\n                  <line x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\"></line>\n                  <path d=\"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6\"></path>\n                  <path d=\"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23\"></path>\n                  <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\n                  <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\"></line>\n                </svg>\n                Unmute\n              </>\n            ) : (\n              <>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-5 h-5 mr-2\">\n                  <path d=\"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z\"></path>\n                  <path d=\"M19 10v2a7 7 0 0 1-14 0v-2\"></path>\n                  <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\n                  <line x1=\"8\" y1=\"23\" x2=\"16\" y2=\"23\"></line>\n                </svg>\n                Mute\n              </>\n            )}\n          </button>\n          \n          <VideoControls \n            isVideoEnabled={isVideoEnabled}\n            onToggleVideo={handleToggleVideo}\n            onSwitchCamera={handleSwitchCamera}\n            videoDevices={videoDevices}\n          />\n          \n          <button\n            onClick={handleLeaveRoom}\n            className={clsx(\n              'inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]',\n              'rounded-full border border-transparent bg-[#D15052] shadow-md',\n              'text-base font-medium whitespace-nowrap text-white',\n              'data-hover:bg-[#C04042]'\n            )}\n            aria-label=\"Leave chat room\"\n          >\n            Leave\n          </button>\n        </div>\n      </div>\n      \n      {/* Main content */}\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {isConnecting ? (\n          <div className=\"flex flex-col items-center justify-center h-full\">\n            <div className=\"text-lg font-medium mb-2 text-gray-900\">Connecting...</div>\n            <div className=\"text-sm text-gray-500\">\n              Setting up secure connection\n            </div>\n          </div>\n        ) : error ? (\n          <div className=\"flex flex-col items-center justify-center h-full\">\n            <div className=\"text-lg font-medium text-[#D15052] mb-2\">Error</div>\n            <div className=\"text-sm text-gray-500 mb-4\">{error}</div>\n            <button\n              onClick={handleLeaveRoom}\n              className={clsx(\n                'inline-flex items-center justify-center px-4 py-[calc(--spacing(2)-1px)]',\n                'rounded-full border border-transparent bg-gray-950 shadow-md',\n                'text-base font-medium whitespace-nowrap text-white',\n                'data-hover:bg-gray-800'\n              )}\n            >\n              Go Back\n            </button>\n          </div>\n        ) : (\n          <div className=\"flex flex-col space-y-4\">\n            {/* QR Code */}\n            {showQRCode && (\n              <div className=\"bg-white p-6 rounded-xl shadow-md mx-auto max-w-xs\">\n                <QRCodeGenerator\n                  connectionData={getConnectionData()}\n                  className=\"mx-auto\"\n                />\n                <p className=\"text-center mt-4 text-sm text-gray-500\">\n                  Scan to join this room\n                </p>\n              </div>\n            )}\n            \n            {/* Camera permission guide */}\n            {cameraStatus && cameraStatus.status !== 'granted' && isVideoEnabled && (\n              <CameraPermissionGuide\n                status={cameraStatus.status}\n                instructions={cameraStatus.instructions}\n                browser={cameraStatus.browser?.name}\n                onRetry={handleRetryCameraAccess}\n                className=\"mx-auto max-w-md\"\n              />\n            )}\n            \n            {/* Video grid */}\n            <div className={clsx(\n              'grid gap-4',\n              getGridColumns(),\n              'auto-rows-fr'\n            )}>\n              {/* Local user */}\n              <VideoContainer\n                stream={localVideoStream}\n                isMuted={true}\n                isLocal={true}\n                displayName={userId}\n                isSpeaking={isSpeaking}\n                isVideoEnabled={isVideoEnabled && localVideoStream !== null}\n                className=\"aspect-video h-full\"\n              />\n              \n              {/* Connected peers */}\n              {connectedPeers.map((peerId) => (\n                <VideoContainer\n                  key={peerId}\n                  stream={remoteVideoStreams[peerId]}\n                  isMuted={false}\n                  isLocal={false}\n                  displayName={peerId}\n                  isSpeaking={peerSpeaking[peerId] || false}\n                  isVideoEnabled={remoteVideoStreams[peerId] !== undefined}\n                  className=\"aspect-video h-full\"\n                />\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default VideoChatRoom;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}